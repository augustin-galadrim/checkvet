components: []
container:
  properties:
    html: "<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n  <meta charset=\"utf-8\">\n  <!-- Balise meta responsive -->\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <style>\n    /* ----------------------------------------------------\n       Styles de base, resets et style du conteneur\n    ---------------------------------------------------- */\n    * {\n      box-sizing: border-box;\n      font-family: Arial, sans-serif;\n      margin: 0;\n      padding: 0;\n    }\n\n    body {\n      background-color: #f5f5f5;\n      height: 100vh;\n      overflow: hidden;\n    }\n\n    .container {\n      display: flex;\n      flex-direction: column;\n      height: 100vh;\n      max-width: 800px;\n      width: 100%;\n      margin: 0 auto;\n      background-color: white;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    }\n\n    .fixed-section {\n      background: white;\n      z-index: 10;\n    }\n\n    /* Onglets de navigation */\n    .nav-tabs {\n      display: flex;\n      width: 100%;\n      border-bottom: 1px solid #ddd;\n    }\n    .nav-tab {\n      flex: 1;\n      padding: 8px 16px;\n      cursor: pointer;\n      border: 1px solid #ccc;\n      border-bottom: none;\n      background: #f8f8f8;\n      font-size: 14px;\n      position: relative;\n      margin-right: -1px;\n      text-align: center;\n    }\n    .nav-tab.active {\n      background: #e5e5e5;\n      border-top: 1px solid #999;\n      border-left: 1px solid #999;\n      border-right: 1px solid #999;\n      border-bottom: 1px solid #e5e5e5;\n      margin-bottom: -1px;\n    }\n\n    .actions-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 15px 20px;\n      flex-wrap: wrap;\n    }\n\n    .left-section {\n      display: flex;\n      align-items: center;\n      gap: 15px;\n      flex-wrap: wrap;\n    }\n\n    .create-button,\n    .vet-filter-button {\n      padding: 8px 16px;\n      background: #fff;\n      border: 1px solid #ddd;\n      border-radius: 4px;\n      cursor: pointer;\n    }\n    .create-button:hover,\n    .vet-filter-button:hover {\n      background: #f5f5f5;\n    }\n\n    .time {\n      color: #666;\n      font-size: 14px;\n    }\n\n    .search-bar {\n      width: calc(100% - 40px);\n      padding: 8px;\n      border: 1px solid #ddd;\n      border-radius: 4px;\n      margin: 0 20px 15px 20px;\n    }\n\n    .scrollable-content {\n      flex: 1;\n      overflow-y: auto;\n      padding: 20px;\n    }\n\n    .record-entry {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      border: 1px solid #ddd;\n      border-radius: 4px;\n      padding: 10px;\n      margin-bottom: 10px;\n      background: #fff;\n      cursor: pointer;\n    }\n\n    .record-subcase {\n      flex: 1;\n      padding: 0 10px;\n      text-align: left;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    }\n\n    /* Trash icon style */\n    .trash-icon {\n      width: auto;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      padding: 0 4px;\n      cursor: pointer;\n    }\n    .trash-icon svg {\n      width: 18px;\n      height: 18px;\n      fill: #888;\n      transition: fill 0.2s;\n    }\n    .trash-icon:hover svg {\n      fill: #c00;\n    }\n\n    /* Style personnalisé de la scrollbar */\n    .scrollable-content::-webkit-scrollbar {\n      width: 8px;\n    }\n    .scrollable-content::-webkit-scrollbar-track {\n      background: #f1f1f1;\n    }\n    .scrollable-content::-webkit-scrollbar-thumb {\n      background: #888;\n      border-radius: 4px;\n    }\n    .scrollable-content::-webkit-scrollbar-thumb:hover {\n      background: #555;\n    }\n\n    /* Styles de la barre d'état */\n    .status-nav {\n      display: flex;\n      align-items: center;\n      background-color: white;\n      border: 1px solid #e0e0e0;\n      border-radius: 25px;\n      padding: 5px;\n      width: fit-content;\n    }\n\n    .status-option {\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      gap: 8px;\n      color: #666;\n      cursor: pointer;\n      text-decoration: none;\n      font-family: system-ui, -apple-system, sans-serif;\n    }\n    .status-option:hover {\n      background-color: #f5f5f5;\n      border-radius: 20px;\n    }\n    .status-option.active {\n      background-color: #e8f0fe;\n      border-radius: 20px;\n      color: #1a73e8;\n    }\n    .icon {\n      width: 18px;\n      height: 18px;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    /* Modal pour la sélection des vétérinaires */\n    .vet-modal,\n    .vet-add-modal {\n      display: none;\n      position: fixed;\n      z-index: 999;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0,0,0,0.5);\n    }\n    .modal-content {\n      background-color: #fff;\n      width: 300px;\n      margin: 100px auto;\n      padding: 20px;\n      border-radius: 8px;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n      position: relative;\n    }\n    .modal-content h3 {\n      margin-bottom: 15px;\n    }\n    .vet-list,\n    .vet-add-results {\n      max-height: 200px;\n      overflow-y: auto;\n      margin-bottom: 15px;\n    }\n    .vet-item {\n      display: flex;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n    .vet-item label {\n      margin-left: 8px;\n    }\n    .modal-actions {\n      display: flex;\n      justify-content: flex-end;\n      gap: 10px;\n    }\n    .modal-actions button {\n      padding: 6px 12px;\n      border: 1px solid #ccc;\n      background: #f8f8f8;\n      border-radius: 4px;\n      cursor: pointer;\n    }\n    .modal-actions button:hover {\n      background: #f0f0f0;\n    }\n    /* Input pour la recherche dans le modal d'ajout */\n    .vet-add-search {\n      width: 100%;\n      padding: 8px;\n      border: 1px solid #ddd;\n      border-radius: 4px;\n      margin-bottom: 10px;\n    }\n\n    /* Ajustements responsive */\n    @media (max-width: 800px) {\n      .container {\n        height: 100vh;\n      }\n      .nav-tab {\n        font-size: 12px;\n        padding: 6px 8px;\n      }\n      .actions-row {\n        padding: 10px 15px;\n      }\n      .search-bar {\n        margin: 0 10px 15px 10px;\n      }\n      .create-button,\n      .vet-filter-button {\n        padding: 6px 12px;\n        font-size: 13px;\n      }\n      .status-option {\n        padding: 6px 10px;\n        font-size: 13px;\n      }\n      .modal-content {\n        width: 90%;\n        margin: 50px auto;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <!-- Section fixe en haut -->\n    <div class=\"fixed-section\">\n      <div class=\"nav-tabs\">\n        <button class=\"nav-tab\" data-tab=\"Production\">Production</button>\n        <button class=\"nav-tab\" data-tab=\"Templates\">Templates/IA</button>\n        <button class=\"nav-tab active\" data-tab=\"Archives\">Archives</button>\n        <button class=\"nav-tab\" data-tab=\"Settings\">Paramètres</button>\n      </div>\n\n      <div class=\"actions-row\">\n        <div class=\"left-section\">\n          <button class=\"create-button\" id=\"createBtn\">+ Créer</button>\n\n          <!-- Barre d'état -->\n          <nav class=\"status-nav\">\n            <a href=\"#\" class=\"status-option active\" data-filter=\"Afficher tout\">\n              <span class=\"icon\">\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z\"/>\n                </svg>\n              </span>\n              Afficher tout\n            </a>\n            <a href=\"#\" class=\"status-option\" data-filter=\"à corriger\">\n              <span class=\"icon\">\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"/>\n                </svg>\n              </span>\n              A corriger\n            </a>\n            <a href=\"#\" class=\"status-option\" data-filter=\"validé\">\n              <span class=\"icon\">\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"/>\n                </svg>\n              </span>\n              Validé\n            </a>\n            <a href=\"#\" class=\"status-option\" data-filter=\"envoyé\">\n              <span class=\"icon\">\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"/>\n                </svg>\n              </span>\n              Envoyé\n            </a>\n          </nav>\n\n          <!-- Bouton filtre \"Vétérinaires\" -->\n          <button class=\"vet-filter-button\" id=\"vetFilterBtn\">Vétérinaires</button>\n        </div>\n\n        <!-- Place for the time (to avoid null querySelector) -->\n        <div class=\"time\">--:--</div>\n      </div>\n\n      <input type=\"text\" class=\"search-bar\" placeholder=\"Rechercher\">\n    </div>\n\n    <!-- Conteneur défilable pour les rapports -->\n    <div class=\"scrollable-content\" id=\"reportsContainer\">\n      <!-- Le contenu sera rempli dynamiquement -->\n    </div>\n  </div>\n\n  <!-- Modal pour la sélection des vétérinaires -->\n  <div class=\"vet-modal\" id=\"vetModal\">\n    <div class=\"modal-content\">\n      <h3>Trier par vétérinaire</h3>\n      <div class=\"vet-list\" id=\"vetList\">\n        <!-- Les cases à cocher seront générées ici -->\n      </div>\n      <div class=\"modal-actions\">\n        <button id=\"vetModalRetourBtn\">Retour</button>\n        <button id=\"vetModalAddBtn\">Ajouter des vétérinaires</button>\n        <button id=\"vetModalApplyBtn\">Appliquer</button>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal pour ajouter/rechercher de nouveaux vétérinaires -->\n  <div class=\"vet-add-modal\" id=\"vetAddModal\">\n    <div class=\"modal-content\">\n      <h3>Ajouter un vétérinaire</h3>\n      <input type=\"text\" class=\"vet-add-search\" id=\"vetAddSearch\" placeholder=\"Rechercher un utilisateur\">\n      <div class=\"vet-add-results\" id=\"vetAddResults\">\n        <!-- Les résultats de la recherche seront affichés ici -->\n      </div>\n      <div class=\"modal-actions\">\n        <button id=\"vetAddRetourBtn\">Retour</button>\n      </div>\n    </div>\n  </div>\n\n  <!-- Élément fictif pour satisfaire le code injecté (ex. updateTime) -->\n  <div id=\"updateTime\" style=\"display: none;\"></div>\n\n  <script>\n    // ---------------------------------------------------------------------------\n    // 1) Déclarations globales et fonctions (pour calls via Python)\n    // ---------------------------------------------------------------------------\n    window.__affiliated_vets = [];\n    window.__structure = null;\n\n    // Appelé par Python pour définir le tableau des vétérinaires affiliés.\n    window.setAffiliatedVets = function(vetsArray) {\n      window.__affiliated_vets = vetsArray || [];\n      console.log(\"setAffiliatedVets appelé avec :\", window.__affiliated_vets);\n      renderVetCheckboxes();\n    };\n\n    // Appelé par Python pour définir l'ID de la structure courante.\n    window.setStructure = function(structure) {\n      window.__structure = structure;\n      console.log(\"setStructure appelé avec :\", window.__structure);\n    };\n\n    // Fonction utilitaire pour formater la valeur last_modified\n    function formatLastModified(dateStr) {\n      if (!dateStr) return \"(N/A)\";\n      const parts = dateStr.split(\" \");\n      if (parts.length < 2) return dateStr;\n      const dateOnly = parts[0];\n      const [yearStr, monthStr, dayStr] = dateOnly.split(\"-\");\n      const year = parseInt(yearStr, 10);\n      const month = parseInt(monthStr, 10);\n      const day = parseInt(dayStr, 10);\n      const currentYear = new Date().getFullYear();\n      if (year !== currentYear) {\n        return \"l'an dernier\";\n      } else {\n        // Format \"jour abbrMois\"\n        const monthNames = [\n          \"janv.\",\"févr.\",\"mars\",\"avr.\",\"mai\",\"juin\",\n          \"juil.\",\"août\",\"sept.\",\"oct.\",\"nov.\",\"déc.\"\n        ];\n        return `${day} ${monthNames[month - 1] || ''}`.trim();\n      }\n    }\n\n    // Parseur personnalisé pour \"YYYY-MM-DD HH:MM[:SS]\"\n    function parseDateTime(dateStr) {\n      if (!dateStr) return 0;\n      const parts = dateStr.split(\" \");\n      if (parts.length < 2) return 0;\n      const [datePart, timePart] = parts;\n      const [year, month, day] = datePart.split(\"-\").map(Number);\n      const timeSegments = timePart.split(\":\").map(Number);\n\n      const hour = timeSegments[0] || 0;\n      const minute = timeSegments[1] || 0;\n      const second = timeSegments[2] || 0;  // handle missing seconds\n\n      return new Date(year, month - 1, day, hour, minute, second).getTime();\n    }\n\n    // Appelé par Python pour remplir la liste des rapports\n    window.populateReports = function(reports) {\n      console.log(\"populateReports appelé avec\", reports.length, \"rapports.\");\n      const container = document.getElementById(\"reportsContainer\");\n      if (!container) {\n        console.log(\"populateReports : #reportsContainer introuvable.\");\n        return;\n      }\n\n      // -------------------------------------------------------------------------\n      // CHANGE HERE: Sort ascending, then iterate backwards\n      // -------------------------------------------------------------------------\n      // 1) Sort from oldest -> newest\n      reports.sort((a, b) => parseDateTime(a.last_modified) - parseDateTime(b.last_modified));\n\n      // 2) Clear container\n      container.innerHTML = \"\";\n\n      // 3) Loop from the end to the beginning => newest appended first => top\n      for (let i = reports.length - 1; i >= 0; i--) {\n        const report = reports[i];\n\n        const entryDiv = document.createElement(\"div\");\n        entryDiv.className = \"record-entry\";\n\n        // (1) Nom du patient\n        const nameDiv = document.createElement(\"div\");\n        nameDiv.className = \"record-subcase\";\n        nameDiv.textContent = report.name || \"(Aucun)\";\n\n        // (2) Date\n        const dateDiv = document.createElement(\"div\");\n        dateDiv.className = \"record-subcase\";\n        dateDiv.textContent = formatLastModified(report.last_modified);\n\n        // (3) Statut\n        const statutDiv = document.createElement(\"div\");\n        statutDiv.className = \"record-subcase\";\n        statutDiv.textContent = report.statut || \"(Non spécifié)\";\n\n        // (4) Icone \"poubelle\"\n        const trashDiv = document.createElement(\"div\");\n        trashDiv.className = \"trash-icon\";\n        trashDiv.innerHTML = `\n          <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n            <path d=\"M15 4V3c0-1.11-.89-2-2-2h-2c-1.11 0-2 .89-2 2v1H5v2h14V4h-4zm-6 0V3h2v1h-2zm-1 4v12a2 2 0 002 2h4a2 2 0 002-2V8H8z\"/>\n          </svg>\n        `;\n        // Éviter d'ouvrir le formulaire si on clique sur la poubelle\n        trashDiv.addEventListener(\"click\", function(ev) {\n          ev.stopPropagation();\n          anvil.call(ev.target, \"delete_report_client_side\", report.report_rich);\n        });\n\n        // Clic sur la ligne => ouvre le form\n        entryDiv.addEventListener(\"click\", function(event) {\n          anvil.call(event.target, \"open_audio_manager_form\", report);\n        });\n\n        // Assembler\n        entryDiv.appendChild(nameDiv);\n        entryDiv.appendChild(dateDiv);\n        entryDiv.appendChild(statutDiv);\n        entryDiv.appendChild(trashDiv);\n\n        container.appendChild(entryDiv);\n      }\n    };\n\n    // ---------------------------------------------------------------------------\n    // 2) Gestion des cases à cocher pour filtrer par véto\n    // ---------------------------------------------------------------------------\n    function renderVetCheckboxes() {\n      const vetList = document.getElementById(\"vetList\");\n      if (!vetList) return;\n      vetList.innerHTML = \"\";\n      window.__affiliated_vets.forEach(vetName => {\n        const itemDiv = document.createElement(\"div\");\n        itemDiv.className = \"vet-item\";\n        const checkbox = document.createElement(\"input\");\n        checkbox.type = \"checkbox\";\n        checkbox.value = vetName;\n        checkbox.id = \"vetCheckbox_\" + vetName;\n        const label = document.createElement(\"label\");\n        label.setAttribute(\"for\", checkbox.id);\n        label.textContent = vetName;\n        itemDiv.appendChild(checkbox);\n        itemDiv.appendChild(label);\n        vetList.appendChild(itemDiv);\n      });\n    }\n\n    // ---------------------------------------------------------------------------\n    // 3) Recherche pour l'ajout de véto (renderVetAddResults)\n    // ---------------------------------------------------------------------------\n    function renderVetAddResults(users) {\n      const resultsContainer = document.getElementById(\"vetAddResults\");\n      resultsContainer.innerHTML = \"\";\n      if (!users || users.length === 0) {\n        resultsContainer.textContent = \"Aucun résultat.\";\n        return;\n      }\n      users.forEach(user => {\n        const userDiv = document.createElement(\"div\");\n        userDiv.className = \"vet-item\";\n        userDiv.style.cursor = \"pointer\";\n        userDiv.textContent = user.name || user.email;\n        userDiv.addEventListener(\"click\", function(evt) {\n          const confirmAdd = window.confirm(\"Voulez-vous autoriser cet utilisateur à rejoindre votre structure ?\");\n          if (confirmAdd) {\n            anvil.call(evt.target, \"add_authorized_vet_relay\", window.__structure, user.email)\n              .then(result => {\n                alert(\"Utilisateur ajouté.\");\n                document.getElementById(\"vetAddModal\").style.display = \"none\";\n                document.getElementById(\"vetModal\").style.display = \"block\";\n              })\n              .catch(err => {\n                alert(\"Erreur lors de l'ajout : \" + err);\n              });\n          }\n        });\n        resultsContainer.appendChild(userDiv);\n      });\n    }\n\n    // ---------------------------------------------------------------------------\n    // 4) Attachement des écouteurs d'événements une fois le DOM chargé\n    // ---------------------------------------------------------------------------\n    (function attachArchivesEvents(){\n      console.log(\"ArchivesSecretariat : Attachement des écouteurs d'événements...\");\n\n      // Onglets\n      const tabs = document.querySelectorAll('.nav-tab');\n      tabs.forEach(tab => {\n        tab.addEventListener('click', (event) => {\n          const oldActive = document.querySelector('.nav-tab.active');\n          if (oldActive) oldActive.classList.remove('active');\n          tab.classList.add('active');\n          const tabValue = tab.getAttribute(\"data-tab\");\n          if (tabValue === 'Production') {\n            anvil.call(event.target, 'open_production_form');\n          } else if (tabValue === 'Templates') {\n            anvil.call(event.target, 'open_templates_form');\n          } else if (tabValue === 'Settings') {\n            anvil.call(event.target, 'open_settings_form');\n          }\n          // If 'Archives', do nothing\n        });\n      });\n\n      // Bouton \"Créer\"\n      const createBtn = document.getElementById('createBtn');\n      if (createBtn) {\n        // Clone & replace to avoid double-listeners if reloaded\n        createBtn.replaceWith(createBtn.cloneNode(true));\n        const newCreateBtn = document.getElementById('createBtn');\n        newCreateBtn.addEventListener('click', (event) => {\n          anvil.call(event.target, 'open_create_form');\n        });\n      }\n\n      // Barre d'état - filtres de statut\n      const statusOptions = document.querySelectorAll('.status-option');\n      statusOptions.forEach(option => {\n        option.addEventListener('click', (event) => {\n          event.preventDefault();\n          const oldActive = document.querySelector('.status-option.active');\n          if (oldActive) oldActive.classList.remove('active');\n          option.classList.add('active');\n          const filterVal = option.getAttribute('data-filter');\n          anvil.call(event.target, 'filter_reports_client', filterVal);\n        });\n      });\n\n      // Barre de recherche\n      const searchInput = document.querySelector('.search-bar');\n      if (searchInput) {\n        searchInput.addEventListener('input', function(event) {\n          const query = event.target.value;\n          anvil.call(event.target, 'search_reports_client', query);\n        });\n      }\n\n      // Bouton \"Vétérinaires\" + modaux\n      const vetFilterBtn = document.getElementById('vetFilterBtn');\n      const vetModal = document.getElementById('vetModal');\n      const vetModalRetourBtn = document.getElementById('vetModalRetourBtn');\n      const vetModalApplyBtn = document.getElementById('vetModalApplyBtn');\n      const vetModalAddBtn = document.getElementById('vetModalAddBtn');\n\n      vetFilterBtn.addEventListener('click', () => {\n        renderVetCheckboxes();\n        vetModal.style.display = \"block\";\n      });\n      vetModalRetourBtn.addEventListener('click', () => {\n        vetModal.style.display = \"none\";\n      });\n      vetModalApplyBtn.addEventListener('click', (event) => {\n        const checkedVets = [];\n        const checkboxes = document.querySelectorAll('#vetList input[type=\"checkbox\"]');\n        checkboxes.forEach(cb => {\n          if (cb.checked) {\n            checkedVets.push(cb.value);\n          }\n        });\n        anvil.call(event.target, 'filter_reports_vets', checkedVets);\n        vetModal.style.display = \"none\";\n      });\n      vetModalAddBtn.addEventListener('click', () => {\n        vetModal.style.display = \"none\";\n        document.getElementById(\"vetAddModal\").style.display = \"block\";\n      });\n\n      const vetAddSearch = document.getElementById('vetAddSearch');\n      vetAddSearch.addEventListener('input', function(event) {\n        const searchTerm = event.target.value;\n        anvil.call(event.target, 'search_users_relay', searchTerm)\n          .then(users => {\n            renderVetAddResults(users);\n          })\n          .catch(err => {\n            console.error(\"Erreur lors de la recherche d'utilisateurs :\", err);\n          });\n      });\n      const vetAddRetourBtn = document.getElementById('vetAddRetourBtn');\n      vetAddRetourBtn.addEventListener('click', () => {\n        document.getElementById(\"vetAddModal\").style.display = \"none\";\n        vetModal.style.display = \"block\";\n      });\n\n      // -------------------------------------------------------------------------\n      // If you want to display current time in .time\n      // -------------------------------------------------------------------------\n      function updateTime() {\n        const timeElem = document.querySelector('.time');\n        if (timeElem) {\n          const now = new Date();\n          const hrs = now.getHours().toString().padStart(2, '0');\n          const mins = now.getMinutes().toString().padStart(2, '0');\n          timeElem.textContent = `${hrs}h${mins}`;\n        }\n      }\n      updateTime();\n      setInterval(updateTime, 60000);\n\n      console.log(\"ArchivesSecretariat : Écouteurs d'événements attachés.\");\n    })();\n  </script>\n  <script>\n    // Initialize only once\n    if (!window.__session_handlers_initialized) {\n      window.__session_handlers_initialized = true;\n      \n      // Session handler setup\n      window.setupSessionHandlers = function() {\n        // Tab visibility change\n        document.addEventListener('visibilitychange', function() {\n          if (document.visibilityState === 'visible') {\n            anvil.call(document.body, 'refresh_session_relay');\n          }\n        });\n        \n        // Online status change\n        window.addEventListener('online', function() {\n          anvil.call(document.body, 'refresh_session_relay');\n        });\n      };\n    }\n  </script>\n</body>\n</html>\n"
  type: HtmlTemplate
is_package: true
