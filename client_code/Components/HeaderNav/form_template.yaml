components: []
container:
  properties:
    html: |-
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="utf-8">
          <style>
            .fixed-section {
              background: white;
              z-index: 10;
              padding: 10px 20px;
              border-bottom: 1px solid #ddd;
            }
            .nav-tabs {
              display: flex;
              width: 100%;
              border: 1px solid #ddd;
              border-radius: 4px;
              overflow: hidden;
            }
            .nav-tab {
              flex-grow: 1;
              flex-shrink: 1;
              flex-basis: 0;
              padding: 10px 16px;
              cursor: pointer;
              background: #f8f8f8;
              font-size: 14px;
              text-align: center;
              border: none;
              border-right: 1px solid #ddd;
              transition: background-color 0.2s;
              color: #333;
            }
            .nav-tab:last-child {
              border-right: none;
            }
            .nav-tab:hover {
              background-color: #f0f0f0;
            }
            .nav-tab.active {
              background: #fff;
              color: #1a73e8;
              font-weight: bold;
              box-shadow: inset 0 -2px 0 #1a73e8;
            }
            @media (max-width: 800px) {
              .fixed-section { padding: 8px; }
              .nav-tab { padding: 14px 6px; font-size: 13px; white-space: nowrap; }
            }
          </style>
        </head>
        <body>
          <div class="fixed-section">
            <div class="nav-tabs">
              <button class="nav-tab" data-tab="Production" id="headerNav-button-production">Production</button>
              <button class="nav-tab" data-tab="Templates" id="headerNav-button-templates">Templates</button>
              <button class="nav-tab" data-tab="Archives" id="headerNav-button-archives">Archives</button>
              <button class="nav-tab" data-tab="Settings" id="headerNav-button-settings">Settings</button>
            </div>
          </div>
          <script>
            if (!window.__header_nav_globals) {
              window.__header_nav_globals = true;

              const logger = window.createLogger('HeaderNav');

              // This function is now exposed on the window object to be callable from Python.
              window.js_attachHeaderEvents = function() {
                logger.log('Attaching event listeners to navigation tabs.');
                document.querySelectorAll('.nav-tab').forEach(tab => {
                  const newTab = tab.cloneNode(true);
                  tab.parentNode.replaceChild(newTab, tab);

                  newTab.addEventListener('click', (event) => {
                    const tabValue = newTab.getAttribute("data-tab");
                    logger.debug(`Tab clicked: ${tabValue}`);
                    if (tabValue === 'Production') {
                      anvil.call(event.target, 'open_production_form');
                    } else if (tabValue === 'Templates') {
                      anvil.call(event.target, 'open_templates_form');
                    } else if (tabValue === 'Archives') {
                      anvil.call(event.target, 'open_archives_form');
                    } else if (tabValue === 'Settings') {
                      anvil.call(event.target, 'open_settings_form');
                    }
                  });
                });
              }

              window.setActiveTab = function(tabName) {
                logger.log(`Setting active tab to: ${tabName}`);
                document.querySelectorAll('.nav-tab').forEach(btn => {
                  btn.classList.remove('active');
                  if (btn.getAttribute('data-tab') === tabName) {
                    btn.classList.add('active');
                  }
                });
              };
            }
          </script>
        </body>
      </html>
  type: HtmlTemplate
custom_component: true
is_package: true
properties:
- {default_binding_prop: true, default_value: '', important: true, name: active_tab, type: string}
toolbox_item: {group: App Header}
